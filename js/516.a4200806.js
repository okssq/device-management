"use strict";(self["webpackChunkdevice_management"]=self["webpackChunkdevice_management"]||[]).push([[516],{4516:(e,a,t)=>{t.r(a),t.d(a,{default:()=>Y});var l=t(3673),o=t(8880);const n={class:"my-box column no-wrap"},s={class:"flex1 overflow-hidden"},i={class:"q-gutter-sm"};function r(e,a,t,r,m,d){const c=(0,l.up)("search-bar"),p=(0,l.up)("q-separator"),u=(0,l.up)("q-badge"),g=(0,l.up)("q-btn"),y=(0,l.up)("result-table");return(0,l.wg)(),(0,l.iD)("div",n,[(0,l.Wm)(c,{searching:r.searching,onSearch:r.onSearch,onInsert:r.onInsert},null,8,["searching","onSearch","onInsert"]),(0,l.Wm)(p),(0,l._)("div",s,[(0,l.Wm)(y,{"row-key":"id",rows:r.rows,columns:r.columns,loading:r.searching,page:e.page,"page-size":e.pageSize,"total-count":e.totalCount,"total-page":e.totalPage,onPage:r.onPageChange},{"custom-withCompany":(0,l.w5)((({val:e})=>[(0,l.Wm)(u,{size:"sm",color:1==e?"green":"red",label:1==e?"是":"否"},null,8,["color","label"])])),op:(0,l.w5)((({row:e})=>[(0,l._)("div",i,[(0,l.Wm)(g,{title:"编辑",color:"primary",flat:"",dense:"",size:"11px",round:"",icon:"edit",onClick:(0,o.iM)((a=>r.onEdit(e)),["stop"])},null,8,["onClick"]),(0,l.Wm)(g,{title:"删除",color:"red-5",flat:"",dense:"",size:"11px",round:"",icon:"clear",onClick:(0,o.iM)((a=>r.onDel(e)),["stop"])},null,8,["onClick"])])])),_:1},8,["rows","columns","loading","page","page-size","total-count","total-page","onPage"])])])}t(9544);const m={class:"bg-white q-pl-md q-pb-md q-mt-md"},d=(0,l._)("span",{class:"text-caption text-bold"},"公司ID",-1),c=(0,l._)("span",{class:"text-caption text-bold"},"用户账号",-1),p=(0,l._)("span",{class:"text-caption text-bold"},"用户昵称",-1);function u(e,a,t,o,n,s){const i=(0,l.up)("q-input"),r=(0,l.up)("q-btn"),u=(0,l.up)("q-form");return(0,l.wg)(),(0,l.iD)("div",m,[(0,l.Wm)(u,{class:"q-gutter-sm row items-center",onSubmit:o.onSubmit},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{outlined:"",dense:"",modelValue:o.companyId,"onUpdate:modelValue":a[0]||(a[0]=e=>o.companyId=e)},{prepend:(0,l.w5)((()=>[d])),_:1},8,["modelValue"]),(0,l.Wm)(i,{outlined:"",dense:"",modelValue:o.userName,"onUpdate:modelValue":a[1]||(a[1]=e=>o.userName=e)},{prepend:(0,l.w5)((()=>[c])),_:1},8,["modelValue"]),(0,l.Wm)(i,{outlined:"",dense:"",modelValue:o.realName,"onUpdate:modelValue":a[2]||(a[2]=e=>o.realName=e)},{prepend:(0,l.w5)((()=>[p])),_:1},8,["modelValue"]),(0,l.Wm)(r,{icon:"search",color:"primary",dense:"",type:"submit",disable:t.searching},null,8,["disable"]),(0,l.Wm)(r,{icon:"add",color:"primary",dense:"",onClick:a[3]||(a[3]=a=>e.$emit("insert"))})])),_:1},8,["onSubmit"])])}var g=t(1959);const y={emits:["search","insert"],props:{searching:{type:Boolean,default:!1}},setup(e,{emit:a}){const t=(0,g.iH)(""),l=(0,g.iH)(""),o=(0,g.iH)(""),n=()=>{a("search",{companyId:t.value,userName:l.value,realName:o.value})};return n(),{companyId:t,userName:l,realName:o,onSubmit:n}}};var f=t(4260),h=t(5269),b=t(4842),w=t(2165),x=t(7518),v=t.n(x);const _=(0,f.Z)(y,[["render",u]]),C=_;v()(y,"components",{QForm:h.Z,QInput:b.Z,QBtn:w.Z});var W=t(3514),q=t(8996),Z=t(2323);const V=e=>((0,l.dD)("data-v-7e7a5f93"),e=e(),(0,l.Cn)(),e),S={class:"row q-px-md q-py-xs items-center justify-between"},z={class:"text-body1"},k=V((()=>(0,l._)("span",{class:"text-subtitle2 text-grey-8 text-bold"},"公司名称：",-1))),D=V((()=>(0,l._)("span",{class:"text-subtitle2 text-grey-8 text-bold"},"公司编号：",-1))),I=V((()=>(0,l._)("span",{class:"text-subtitle2 text-grey-8 text-bold"},"联系人：",-1))),N=V((()=>(0,l._)("span",{class:"text-subtitle2 text-grey-8 text-bold"},"联系电话：",-1))),Q=V((()=>(0,l._)("span",{class:"text-subtitle2 text-grey-8 text-bold"},"公司地址：",-1)));function P(e,a,t,o,n,s){const i=(0,l.up)("q-btn"),r=(0,l.up)("q-separator"),m=(0,l.up)("q-input"),d=(0,l.up)("q-form"),c=(0,l.up)("q-scroll-area"),p=(0,l.up)("q-card-actions"),u=(0,l.up)("q-spinner-tail"),g=(0,l.up)("q-inner-loading"),y=(0,l.up)("q-card"),f=(0,l.up)("q-dialog");return(0,l.wg)(),(0,l.j4)(f,{persistent:"",ref:"dialogRef"},{default:(0,l.w5)((()=>[(0,l.Wm)(y,{class:"relative-positon overflow-hidden",style:{width:"570px","max-width":"98vw"}},{default:(0,l.w5)((()=>[(0,l._)("div",S,[(0,l._)("div",z,(0,Z.zw)("insert"===t.type?"新增":"更新")+"公司信息 ",1),(0,l.Wm)(i,{flat:"",round:"",size:"12px",icon:"clear",onClick:o.onDialogHide},null,8,["onClick"])]),(0,l.Wm)(r),(0,l.Wm)(c,{style:{height:"180px","max-height":"50vh",padding:"16px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{class:"row q-gutter-md items-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{dense:"",outlined:"","lazy-rules":"",class:"my-form-item",modelValue:e.companyName,"onUpdate:modelValue":a[0]||(a[0]=a=>e.companyName=a)},{prepend:(0,l.w5)((()=>[k])),_:1},8,["modelValue"]),(0,l.Wm)(m,{dense:"",outlined:"","lazy-rules":"",class:"my-form-item",modelValue:e.companyCode,"onUpdate:modelValue":a[1]||(a[1]=a=>e.companyCode=a)},{prepend:(0,l.w5)((()=>[D])),_:1},8,["modelValue"]),(0,l.Wm)(m,{dense:"",outlined:"","lazy-rules":"",class:"my-form-item",modelValue:e.contact,"onUpdate:modelValue":a[2]||(a[2]=a=>e.contact=a)},{prepend:(0,l.w5)((()=>[I])),_:1},8,["modelValue"]),(0,l.Wm)(m,{dense:"",outlined:"","lazy-rules":"",class:"my-form-item",modelValue:e.contactPhone,"onUpdate:modelValue":a[3]||(a[3]=a=>e.contactPhone=a)},{prepend:(0,l.w5)((()=>[N])),_:1},8,["modelValue"]),(0,l.Wm)(m,{dense:"",outlined:"","lazy-rules":"",class:"my-form-item",modelValue:e.companyAddress,"onUpdate:modelValue":a[4]||(a[4]=a=>e.companyAddress=a)},{prepend:(0,l.w5)((()=>[Q])),_:1},8,["modelValue"])])),_:1})])),_:1}),(0,l.Wm)(r),(0,l.Wm)(p,{align:"right"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{flat:"",label:"取消",color:"primary",onClick:o.onDialogHide},null,8,["onClick"]),(0,l.Wm)(i,{label:"确定",color:"primary",onClick:o.onSubmit},null,8,["onClick"])])),_:1}),(0,l.Wm)(g,{showing:o.loading,style:{"z-index":"100"}},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{color:"primary",size:"2em"})])),_:1},8,["showing"])])),_:1})])),_:1},512)}t(71);var H=t(1701),U=t(5645);const B={emits:[...H.Z.emits],props:{type:{type:String,default:""},formData:{type:Object,default:()=>({})}},setup(e){const{dialogRef:a,onDialogOK:t,onDialogHide:l}=(0,H.Z)();let o=(0,g.qj)({companyAddress:"",companyCode:"",companyName:"",contact:"",contactPhone:""});const n=(0,g.iH)(!1);if("edit"===e.type){console.log("formData",e.formData);const{createTime:a,updateTime:t,...l}=(0,g.IU)(e.formData);o=(0,g.qj)({...l})}const s=()=>{n.value=!0;const a=(0,g.IU)(o);"insert"===e.type?U.j1.insert(a).then((()=>{t()})).catch((()=>{})).finally((()=>{n.value=!1})):U.j1.update(a).then((()=>{t()})).catch((()=>{})).finally((()=>{n.value=!1}))};return{dialogRef:a,...(0,g.BK)(o),loading:n,onSubmit:s,onDialogHide:l}}};var j=t(5926),T=t(151),R=t(5869),A=t(3e3),O=t(9367),L=t(6941),K=t(682);const E=(0,f.Z)(B,[["render",P],["__scopeId","data-v-7e7a5f93"]]),F=E;v()(B,"components",{QDialog:j.Z,QCard:T.Z,QBtn:w.Z,QSeparator:R.Z,QScrollArea:A.Z,QForm:h.Z,QInput:b.Z,QCardActions:O.Z,QInnerLoading:L.Z,QSpinnerTail:K.Z});var M=t(7689),X=t(8825);const $={components:{SearchBar:C,ResultTable:W.Z},setup(){const e=(0,X.Z)(),a=[{name:"userName",field:"userName",label:"用户账号",align:"left"},{name:"realName",field:"realName",label:"用户昵称",align:"left"},{name:"telephone",field:"telephone",label:"联系电话",align:"left"},{name:"companyName",field:"companyName",label:"所属公司",align:"left"},{name:"withCompany",field:"withCompany",label:"管理员",align:"center",type:"custom"},{name:"createTime",field:"createTime",label:"创建时间",align:"left"},{name:"updateTime",field:"updateTime",label:"最后更新时间",align:"left"},{name:"op",label:"操作",field:"op",align:"left"}],t=(0,g.XI)([]),l=(0,g.qj)({page:1,pageSize:10,totalCount:0,totalPage:0}),o=(0,g.iH)(!1);let n,s;const i=()=>{U.HB.selectList({CompanyId:1}).then((e=>{s=e})).catch((()=>{}))},r=()=>{o.value=!0,U.xR.list(n).then((e=>{const{results:a,totalCount:o,totalPage:n}=e;t.value=a,l.totalCount=o,l.totalPage=n})).catch((()=>{})).finally((()=>{o.value=!1}))},m=e=>{l.page=1,n={...e,page:1,pageSize:l.pageSize},r()},d=e=>{const{pageSize:a,page:t}=e;t&&(l.page=t),a&&(l.pageSize=a),n&&(n={...n,...e}),r()},c=()=>{s?e.dialog({component:F,componentProps:{type:"insert",roleList:s}}).onOk((()=>{(0,M.t5)("增加成功"),m({page:1})})):(0,M.Zd)("正在下载角色数据，请稍等!")},p=a=>{s?e.dialog({component:F,componentProps:{type:"edit",formData:a,roleList:s}}).onOk((()=>{(0,M.t5)("更新成功"),r()})):(0,M.Zd)("正在下载角色数据，请稍等!")},u=a=>{e.dialog({component:q.Z,componentProps:{row:a}}).onOk((()=>{o.value=!0,U.xR.del({id:a.id}).then((e=>{(0,M.t5)("删除成功"),r()})).catch((()=>{})).finally((()=>{o.value=!1}))}))};return i(),{columns:a,rows:t,...(0,g.BK)(l),searching:o,onPageChange:d,onSearch:m,onInsert:c,onEdit:p,onDel:u}}};var G=t(9721);const J=(0,f.Z)($,[["render",r]]),Y=J;v()($,"components",{QSeparator:R.Z,QBadge:G.Z,QBtn:w.Z})}}]);