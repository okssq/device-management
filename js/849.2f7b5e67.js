"use strict";(self["webpackChunkdevice_management"]=self["webpackChunkdevice_management"]||[]).push([[849],{5849:(e,a,t)=>{t.r(a),t.d(a,{default:()=>G});var n=t(3673),o=t(8880);const l={class:"my-box column no-wrap"},i={class:"flex1 overflow-hidden"},s={class:"q-gutter-sm"};function c(e,a,t,c,d,m){const r=(0,n.up)("search-bar"),p=(0,n.up)("q-separator"),u=(0,n.up)("q-btn"),g=(0,n.up)("result-table");return(0,n.wg)(),(0,n.iD)("div",l,[(0,n.Wm)(r,{searching:c.searching,onSearch:c.onSearch,onInsert:c.onInsert},null,8,["searching","onSearch","onInsert"]),(0,n.Wm)(p),(0,n._)("div",i,[(0,n.Wm)(g,{"row-key":"id",rows:c.rows,columns:c.columns,loading:c.searching,page:e.page,"page-size":e.pageSize,"total-count":e.totalCount,"total-page":e.totalPage,onPage:c.onPageChange},{op:(0,n.w5)((({row:e})=>[(0,n._)("div",s,[(0,n.Wm)(u,{title:"编辑",flat:"",dense:"",size:"10px",round:"",color:"blue-5",icon:"edit",onClick:(0,o.iM)((a=>c.onEdit(e)),["stop"])},null,8,["onClick"]),(0,n.Wm)(u,{title:"删除",flat:"",dense:"",size:"10px",round:"",color:"red-5",icon:"clear",onClick:(0,o.iM)((a=>c.onDel(e)),["stop"])},null,8,["onClick"])])])),_:1},8,["rows","columns","loading","page","page-size","total-count","total-page","onPage"])])])}t(9544);const d={class:"bg-white q-pl-md q-pb-md q-mt-md"},m=(0,n._)("span",{class:"text-caption text-bold"},"公司ID",-1),r=(0,n._)("span",{class:"text-caption text-bold"},"公司名称",-1);function p(e,a,t,o,l,i){const s=(0,n.up)("q-input"),c=(0,n.up)("q-btn"),p=(0,n.up)("q-form");return(0,n.wg)(),(0,n.iD)("div",d,[(0,n.Wm)(p,{class:"q-gutter-sm row items-center",onSubmit:o.onSubmit},{default:(0,n.w5)((()=>[(0,n.Wm)(s,{outlined:"",dense:"",modelValue:o.companyId,"onUpdate:modelValue":a[0]||(a[0]=e=>o.companyId=e)},{prepend:(0,n.w5)((()=>[m])),_:1},8,["modelValue"]),(0,n.Wm)(s,{outlined:"",dense:"",modelValue:o.companyName,"onUpdate:modelValue":a[1]||(a[1]=e=>o.companyName=e)},{prepend:(0,n.w5)((()=>[r])),_:1},8,["modelValue"]),(0,n.Wm)(c,{icon:"search",color:"primary",dense:"",type:"submit",disable:t.searching},null,8,["disable"]),(0,n.Wm)(c,{icon:"add",color:"primary",dense:"",onClick:a[2]||(a[2]=a=>e.$emit("insert"))})])),_:1},8,["onSubmit"])])}var u=t(1959);const g={emits:["search","insert"],props:{searching:{type:Boolean,default:!1}},setup(e,{emit:a}){const t=(0,u.iH)(""),n=(0,u.iH)(""),o=()=>{a("search",{companyId:t.value,companyName:n.value})};return o(),{companyId:t,companyName:n,onSubmit:o}}};var y=t(4260),f=t(5269),h=t(4842),b=t(2165),w=t(7518),x=t.n(w);const v=(0,y.Z)(g,[["render",p]]),_=v;x()(g,"components",{QForm:f.Z,QInput:h.Z,QBtn:b.Z});var C=t(3514),q=t(8996),W=t(2323);const Z=e=>((0,n.dD)("data-v-0d26c41e"),e=e(),(0,n.Cn)(),e),S={class:"row q-px-md q-py-xs items-center justify-between"},V={class:"text-body1"},k=Z((()=>(0,n._)("span",{class:"text-subtitle2 text-grey-8 text-bold"},"公司名称：",-1))),z=Z((()=>(0,n._)("span",{class:"text-subtitle2 text-grey-8 text-bold"},"公司编号：",-1))),D=Z((()=>(0,n._)("span",{class:"text-subtitle2 text-grey-8 text-bold"},"联系人：",-1))),I=Z((()=>(0,n._)("span",{class:"text-subtitle2 text-grey-8 text-bold"},"联系电话：",-1))),P=Z((()=>(0,n._)("span",{class:"text-subtitle2 text-grey-8 text-bold"},"公司地址：",-1)));function Q(e,a,t,o,l,i){const s=(0,n.up)("q-btn"),c=(0,n.up)("q-separator"),d=(0,n.up)("q-input"),m=(0,n.up)("q-form"),r=(0,n.up)("q-scroll-area"),p=(0,n.up)("q-card-actions"),u=(0,n.up)("q-spinner-tail"),g=(0,n.up)("q-inner-loading"),y=(0,n.up)("q-card"),f=(0,n.up)("q-dialog");return(0,n.wg)(),(0,n.j4)(f,{persistent:"",ref:"dialogRef"},{default:(0,n.w5)((()=>[(0,n.Wm)(y,{class:"relative-positon overflow-hidden",style:{width:"570px","max-width":"98vw"}},{default:(0,n.w5)((()=>[(0,n._)("div",S,[(0,n._)("div",V,(0,W.zw)("insert"===t.type?"新增":"更新")+"公司信息 ",1),(0,n.Wm)(s,{flat:"",round:"",size:"12px",icon:"clear",onClick:o.onDialogHide},null,8,["onClick"])]),(0,n.Wm)(c),(0,n.Wm)(r,{style:{height:"180px","max-height":"50vh",padding:"16px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(m,{class:"row q-gutter-md items-center"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{dense:"",outlined:"","lazy-rules":"",class:"my-form-item",modelValue:e.companyName,"onUpdate:modelValue":a[0]||(a[0]=a=>e.companyName=a)},{prepend:(0,n.w5)((()=>[k])),_:1},8,["modelValue"]),(0,n.Wm)(d,{dense:"",outlined:"","lazy-rules":"",class:"my-form-item",modelValue:e.companyCode,"onUpdate:modelValue":a[1]||(a[1]=a=>e.companyCode=a)},{prepend:(0,n.w5)((()=>[z])),_:1},8,["modelValue"]),(0,n.Wm)(d,{dense:"",outlined:"","lazy-rules":"",class:"my-form-item",modelValue:e.contact,"onUpdate:modelValue":a[2]||(a[2]=a=>e.contact=a)},{prepend:(0,n.w5)((()=>[D])),_:1},8,["modelValue"]),(0,n.Wm)(d,{dense:"",outlined:"","lazy-rules":"",class:"my-form-item",modelValue:e.contactPhone,"onUpdate:modelValue":a[3]||(a[3]=a=>e.contactPhone=a)},{prepend:(0,n.w5)((()=>[I])),_:1},8,["modelValue"]),(0,n.Wm)(d,{dense:"",outlined:"","lazy-rules":"",class:"my-form-item",modelValue:e.companyAddress,"onUpdate:modelValue":a[4]||(a[4]=a=>e.companyAddress=a)},{prepend:(0,n.w5)((()=>[P])),_:1},8,["modelValue"])])),_:1})])),_:1}),(0,n.Wm)(c),(0,n.Wm)(p,{align:"right"},{default:(0,n.w5)((()=>[(0,n.Wm)(s,{flat:"",label:"取消",color:"primary",onClick:o.onDialogHide},null,8,["onClick"]),(0,n.Wm)(s,{label:"确定",color:"primary",onClick:o.onSubmit},null,8,["onClick"])])),_:1}),(0,n.Wm)(g,{showing:o.loading,style:{"z-index":"100"}},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{color:"primary",size:"2em"})])),_:1},8,["showing"])])),_:1})])),_:1},512)}t(71);var j=t(1701),N=t(5645);const U={emits:[...j.Z.emits],props:{type:{type:String,default:""},formData:{type:Object,default:()=>({})}},setup(e){const{dialogRef:a,onDialogOK:t,onDialogHide:n}=(0,j.Z)();let o=(0,u.qj)({companyAddress:"",companyCode:"",companyName:"",contact:"",contactPhone:""});const l=(0,u.iH)(!1);if("edit"===e.type){console.log("formData",e.formData);const{createTime:a,updateTime:t,...n}=(0,u.IU)(e.formData);o=(0,u.qj)({...n})}const i=()=>{l.value=!0;const a=(0,u.IU)(o);"insert"===e.type?N.j1.insert(a).then((()=>{t()})).catch((()=>{})).finally((()=>{l.value=!1})):N.j1.update(a).then((()=>{t()})).catch((()=>{})).finally((()=>{l.value=!1}))};return{dialogRef:a,...(0,u.BK)(o),loading:l,onSubmit:i,onDialogHide:n}}};var H=t(5926),T=t(151),A=t(5869),B=t(3e3),O=t(9367),R=t(6941),K=t(682);const E=(0,y.Z)(U,[["render",Q],["__scopeId","data-v-0d26c41e"]]),F=E;x()(U,"components",{QDialog:H.Z,QCard:T.Z,QBtn:b.Z,QSeparator:A.Z,QScrollArea:B.Z,QForm:f.Z,QInput:h.Z,QCardActions:O.Z,QInnerLoading:R.Z,QSpinnerTail:K.Z});var M=t(7689),L=t(8825);const X={components:{SearchBar:_,ResultTable:C.Z},setup(){const e=(0,L.Z)(),a=[{name:"id",field:"id",label:"公司ID",align:"left"},{name:"companyName",field:"companyName",label:"公司名称",align:"left"},{name:"companyCode",field:"companyCode",label:"公司编号",align:"left"},{name:"contact",field:"contact",label:"联系人",align:"left"},{name:"contactPhone",field:"contactPhone",label:"联系电话",align:"left"},{name:"companyAddress",field:"companyAddress",label:"公司地址",align:"left"},{name:"createTime",field:"createTime",label:"创建时间",align:"left"},{name:"updateTime",field:"updateTime",label:"最后更新时间",align:"left"},{name:"op",label:"操作",field:"op",align:"left"}],t=(0,u.XI)([]),n=(0,u.qj)({page:1,pageSize:10,totalCount:0,totalPage:0}),o=(0,u.iH)(!1);let l;const i=()=>{o.value=!0,N.j1.list(l).then((e=>{const{results:a,totalCount:o,totalPage:l}=e;t.value=a,n.totalCount=o,n.totalPage=l})).catch((()=>{})).finally((()=>{o.value=!1}))},s=e=>{n.page=1,l={...e,page:1,pageSize:n.pageSize},i(),console.log("searchData",l)},c=e=>{const{pageSize:a,page:t}=e;t&&(n.page=t),a&&(n.pageSize=a),l&&(l={...l,...e}),i()},d=()=>{e.dialog({component:F,componentProps:{type:"insert"}}).onOk((()=>{(0,M.t5)("增加成功"),s({page:1})}))},m=a=>{e.dialog({component:F,componentProps:{type:"edit",formData:a}}).onOk((()=>{(0,M.t5)("更新成功"),i()}))},r=a=>{e.dialog({component:q.Z,componentProps:{row:a}}).onOk((()=>{o.value=!0,N.j1.del({id:a.id}).then((e=>{(0,M.t5)("删除成功"),i()})).catch((()=>{})).finally((()=>{o.value=!1}))}))};return{columns:a,rows:t,...(0,u.BK)(n),searching:o,onPageChange:c,onSearch:s,onInsert:d,onEdit:m,onDel:r}}},$=(0,y.Z)(X,[["render",c]]),G=$;x()(X,"components",{QSeparator:A.Z,QBtn:b.Z})}}]);