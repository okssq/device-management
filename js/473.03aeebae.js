"use strict";(self["webpackChunkdevice_management"]=self["webpackChunkdevice_management"]||[]).push([[473],{2473:(e,l,t)=>{t.r(l),t.d(l,{default:()=>ne});var o=t(3673),a=t(8880);const n=(0,o._)("div",{class:"absolute-full",id:"t-map"},null,-1),i={class:"absolute-top-right shadow-2 bg-white",style:{"max-height":"100%",top:"15px",right:"15px"}};function s(e,l,t,s,d,u){const r=(0,o.up)("cust-info-window"),c=(0,o.up)("video-panel"),p=(0,o.up)("tree");return(0,o.wg)(),(0,o.iD)(o.HY,null,[n,(0,o.wy)((0,o.Wm)(r,{ref:"refInfoWindow",info:s.info,onVideo:l[0]||(l[0]=e=>s.videoShow=!0),onClose:l[1]||(l[1]=e=>s.visible=!1)},null,8,["info"]),[[a.F8,s.visible]]),s.videoShow?((0,o.wg)(),(0,o.j4)(c,{key:0,onClose:l[2]||(l[2]=e=>s.videoShow=!1)})):(0,o.kq)("",!0),(0,o._)("div",i,[(0,o.Wm)(p,{"default-id":s.defaultId,onSelect:s.onSelect,onTabChange:s.onTabChange},null,8,["default-id","onSelect","onTabChange"])])],64)}var d=t(6433),u=t(2323);const r={class:"row no-wrap items-center q-px-md q-py-sm"},c={class:"text-subtitle2 text-bold text-primary"},p=(0,o.Uk)("状态："),m=(0,o.Uk)("信息："),f=(0,o.Uk)("时间："),w=(0,o.Uk)(" 2022/02/01 20:02:02"),g=(0,o.Uk)("地址："),v={class:"q-pa-sm"},W={class:"text-grey-8"},_={class:"row q-px-md q-py-xs items-center justify-between"},h=(0,o._)("div",{class:"text-body1"},"拍照",-1),y={class:"row q-px-md q-py-xs items-center justify-between"},x=(0,o._)("div",{class:"text-body1"},"文本下发",-1),b=(0,o._)("span",{class:"q-ml-sm text-bold"},"您确定要重启设备吗？",-1);function k(e,l,t,a,n,i){const s=(0,o.up)("q-space"),d=(0,o.up)("q-btn"),k=(0,o.up)("q-separator"),q=(0,o.up)("q-item-section"),C=(0,o.up)("q-badge"),S=(0,o.up)("q-item"),T=(0,o.up)("q-list"),Z=(0,o.up)("q-popup-proxy"),P=(0,o.up)("q-card"),Q=(0,o.up)("q-card-section"),V=(0,o.up)("q-card-actions"),A=(0,o.up)("q-dialog"),M=(0,o.up)("q-input"),H=(0,o.up)("q-avatar"),U=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(P,{style:{width:"320px"}},{default:(0,o.w5)((()=>[(0,o._)("div",r,[(0,o._)("span",c,(0,u.zw)(t.info?a.typeText[t.info.tmlType]+"-"+t.info.label:""),1),(0,o.Wm)(s),(0,o.Wm)(d,{round:"",size:"12px",icon:"clear",color:"red-5",dense:"",class:"absolute-top-right",style:{transform:"translate(50%, -50%)"},onClick:l[0]||(l[0]=l=>e.$emit("close"))})]),(0,o.Wm)(k),(0,o.Wm)(T,{class:"text-bold text-grey-10 q-pb-md",dense:""},{default:(0,o.w5)((()=>[(0,o.Wm)(S,null,{default:(0,o.w5)((()=>[(0,o.Wm)(q,{side:""},{default:(0,o.w5)((()=>[p])),_:1}),t.info?((0,o.wg)(),(0,o.j4)(q,{key:0,side:""},{default:(0,o.w5)((()=>[(0,o.Wm)(C,{color:0==t.info?"grey":"green",label:0==t.info?"离线":"在线"},null,8,["color","label"])])),_:1})):(0,o.kq)("",!0)])),_:1}),(0,o.Wm)(S,null,{default:(0,o.w5)((()=>[(0,o.Wm)(q,{side:""},{default:(0,o.w5)((()=>[m])),_:1}),t.info?((0,o.wg)(),(0,o.j4)(q,{key:0},{default:(0,o.w5)((()=>[(0,o.Uk)((0,u.zw)(t.info.info),1)])),_:1})):(0,o.kq)("",!0)])),_:1}),(0,o.Wm)(S,null,{default:(0,o.w5)((()=>[(0,o.Wm)(q,{side:""},{default:(0,o.w5)((()=>[f])),_:1}),(0,o.Wm)(q,null,{default:(0,o.w5)((()=>[w])),_:1})])),_:1}),(0,o.Wm)(S,null,{default:(0,o.w5)((()=>[(0,o.Wm)(q,{side:""},{default:(0,o.w5)((()=>[g])),_:1}),t.info?((0,o.wg)(),(0,o.j4)(q,{key:0},{default:(0,o.w5)((()=>[(0,o.Uk)((0,u.zw)(t.info.address),1)])),_:1})):(0,o.kq)("",!0)])),_:1})])),_:1}),(0,o.Wm)(k),(0,o._)("div",v,[(0,o._)("div",W,[(0,o.Wm)(d,{flat:"",dense:"",icon:"slideshow",class:"q-mr-xs",title:"视频查看",onClick:a.onVideo},null,8,["onClick"]),(0,o.Wm)(d,{flat:"",dense:"",icon:"photo_camera",class:"q-mr-xs",title:"照相",onClick:a.onPhoto},null,8,["onClick"]),(0,o.Wm)(d,{flat:"",dense:"",icon:"keyboard_voice",class:"q-mr-xs",title:"文本下发",onClick:a.onTTS},null,8,["onClick"]),(0,o.Wm)(d,{flat:"",dense:"",icon:"volume_up",class:"q-mr-xs",title:"音量调节"},{default:(0,o.w5)((()=>[(0,o.Wm)(Z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(T,{dense:"",padding:"",class:"rounded-borders"},{default:(0,o.w5)((()=>[((0,o.wg)(),(0,o.iD)(o.HY,null,(0,o.Ko)([0,20,40,60,80,100],(e=>(0,o.wy)((0,o.Wm)(S,{clickable:"",class:"text-grey-7",key:e},{default:(0,o.w5)((()=>[(0,o.Wm)(q,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,u.zw)(e)+"%",1)])),_:2},1024)])),_:2},1024),[[U]]))),64))])),_:1})])),_:1})])),_:1}),(0,o.Wm)(d,{flat:"",dense:"",icon:"restart_alt",title:"重启",onClick:a.onReStart},null,8,["onClick"])])])])),_:1}),(0,o.Wm)(A,{modelValue:a.dialogPhoto,"onUpdate:modelValue":l[3]||(l[3]=e=>a.dialogPhoto=e),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(P,null,{default:(0,o.w5)((()=>[(0,o._)("div",_,[h,(0,o.wy)((0,o.Wm)(d,{flat:"",round:"",size:"12px",icon:"clear"},null,512),[[U]])]),(0,o.Wm)(k),(0,o.Wm)(Q,{style:{width:"360px",height:"300px"}}),(0,o.Wm)(k),(0,o.Wm)(V,{align:"right"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{dense:"",flat:"",label:"取消",color:"primary",onClick:l[1]||(l[1]=e=>a.dialogPhoto=!1)}),(0,o.Wm)(d,{dense:"",label:"确定",color:"primary",onClick:l[2]||(l[2]=e=>a.dialogPhoto=!1)})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(A,{modelValue:a.dialogTTS,"onUpdate:modelValue":l[7]||(l[7]=e=>a.dialogTTS=e),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(P,null,{default:(0,o.w5)((()=>[(0,o._)("div",y,[x,(0,o.wy)((0,o.Wm)(d,{flat:"",round:"",size:"12px",icon:"clear"},null,512),[[U]])]),(0,o.Wm)(k),(0,o.Wm)(Q,{style:{width:"320px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(M,{modelValue:a.tts,"onUpdate:modelValue":l[4]||(l[4]=e=>a.tts=e),type:"textarea",outlined:""},null,8,["modelValue"])])),_:1}),(0,o.Wm)(V,{align:"right"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{dense:"",flat:"",label:"取消",color:"primary",onClick:l[5]||(l[5]=e=>a.dialogTTS=!1)}),(0,o.Wm)(d,{dense:"",label:"确定",color:"primary",onClick:l[6]||(l[6]=e=>a.dialogTTS=!1)})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(A,{modelValue:a.dialogReStart,"onUpdate:modelValue":l[10]||(l[10]=e=>a.dialogReStart=e),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(P,null,{default:(0,o.w5)((()=>[(0,o.Wm)(Q,{class:"row items-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(H,{size:"40px",icon:"warning",color:"deep-orange","text-color":"white"}),b])),_:1}),(0,o.Wm)(V,{align:"right"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{dense:"",flat:"",label:"取消",color:"primary",onClick:l[8]||(l[8]=e=>a.dialogReStart=!1)}),(0,o.Wm)(d,{dense:"",label:"确定",color:"primary",onClick:l[9]||(l[9]=e=>a.dialogReStart=!1)})])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var q=t(1959);const C={emits:["close","video"],props:{info:{type:[null,Object],default:null}},setup(e,{emit:l}){const t={1:"大屏",2:"打卡桩",3:"储物柜",4:"座椅"},o=()=>{l("video")},a=(0,q.iH)(!1),n=()=>{a.value=!0},i=(0,q.iH)(!1),s=(0,q.iH)(""),d=()=>{s.value="",i.value=!0},u=(0,q.iH)(!1),r=()=>{u.value=!0};return{typeText:t,onVideo:o,dialogPhoto:a,onPhoto:n,dialogTTS:i,tts:s,onTTS:d,dialogReStart:u,onReStart:r}}};var S=t(4260),T=t(151),Z=t(2025),P=t(2165),Q=t(5869),V=t(7011),A=t(3414),M=t(2035),H=t(9721),U=t(3944),I=t(5926),j=t(5589),R=t(9367),z=t(4842),D=t(5096),E=t(677),O=t(7518),L=t.n(O);const $=(0,S.Z)(C,[["render",k]]),B=$;L()(C,"components",{QCard:T.Z,QSpace:Z.Z,QBtn:P.Z,QSeparator:Q.Z,QList:V.Z,QItem:A.Z,QItemSection:M.Z,QBadge:H.Z,QPopupProxy:U.Z,QDialog:I.Z,QCardSection:j.Z,QCardActions:R.Z,QInput:z.Z,QAvatar:D.Z}),L()(C,"directives",{ClosePopup:E.Z});var F=t(594),Y=t.n(F);const J={class:"row q-px-md q-py-xs items-center justify-between"},K=(0,o._)("div",{class:"text-subtitle2"},"视频 60k/s",-1),G=(0,o._)("div",{style:{height:"140px"}},[(0,o._)("video",{loop:"",muted:"",autoplay:"",controls:"",class:"fit",src:Y(),style:{"object-fit":"fill"}})],-1);function N(e,l,t,a,n,i){const s=(0,o.up)("q-btn"),d=(0,o.up)("q-separator"),u=(0,o.up)("q-card");return(0,o.wg)(),(0,o.j4)(u,{class:"absolue-top-left",style:{left:"15px",top:"15px",width:"260px"}},{default:(0,o.w5)((()=>[(0,o._)("div",J,[K,(0,o.Wm)(s,{flat:"",round:"",size:"12px",icon:"clear",onClick:l[0]||(l[0]=l=>e.$emit("close"))})]),(0,o.Wm)(d),G])),_:1})}const X={emits:["close"],setup(){}},ee=(0,S.Z)(X,[["render",N]]),le=ee;L()(X,"components",{QCard:T.Z,QBtn:P.Z,QSeparator:Q.Z});var te=t(327);const oe={components:{Tree:d.Z,custInfoWindow:B,VideoPanel:le},setup(){const e=(0,o.f3)("MAP"),l=(0,o.f3)("MAP_ISLOAD"),t=(0,o.f3)("MAP_TELEPORT_TO"),a=(0,q.iH)(null),n=(0,q.iH)(!1),i=(0,q.iH)("0"),s=(0,q.iH)(!1);let d,u=[];const r=(0,q.iH)(""),c=(0,q.iH)(null),p=l=>{const{id:t,gps:o}=l.target.w.el;c.value=l.target.w.el,r.value=t,n.value=!0,d.setPosition(o),d.open(e.value,o),e.value.panTo(o)},m=()=>{d=new window.AMap.InfoWindow({isCustom:!0,autoMove:!1,content:a.value.$el,anchor:"bottom-center",offset:new window.AMap.Pixel(3,0)}),te.Ry.forEach((l=>{const{gps:t,status:o}=l,a=new AMap.Marker({el:l,gps:t,position:t,offset:new AMap.Pixel(-10,0),icon:`images/status${o}.png`});a.on("click",p),e.value.add(a),u.push(a)})),w(),setTimeout((()=>{e.value.setFitView(u,!1,[60,60,60,60],17)}),500)},f=l=>{const{id:t}=l,o=te.Ry.find((e=>e.id==t));if(!o)return;const{gps:a}=o;n.value=!0,d.setPosition(a),d.open(e.value,a),e.value.panTo(a),c.value=o};(0,o.bv)((()=>{t.value="#t-map",m()})),(0,o.Jd)((()=>{e.value&&(u.length&&(u.forEach((e=>{e.setMap(null),e=null})),u=[]),e.value.clearMap(),t.value="#hidden-map")}));const w=()=>{const e=i.value;u.forEach((l=>{const{status:t}=l.w.el;0==t?1!=e?l.show():l.hide():2==e?l.hide():l.show()}))},g=e=>{i.value=e,w()};return{MAP:e,MAP_ISLOAD:l,refInfoWindow:a,visible:n,videoShow:s,defaultId:r,onSelect:f,info:c,onTabChange:g}}},ae=(0,S.Z)(oe,[["render",s]]),ne=ae}}]);